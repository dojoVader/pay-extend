<script setup lang="ts">
import PayExtendIcon from "@/elements/icons/PayExtendIcon.vue";
import { Form } from '@primevue/forms';
import InputText from 'primevue/inputtext';
import Button from 'primevue/button';
import { Config } from "@/constants/config.ts";

type LoginRequest = {
  email: string;
  password: string;
};

const initialValues = {
  email: '',
  password: ''
};

// Function to handle form submission

const onFormSubmit = async({values}) => {
  const response = await fetch(`${Config.api('/auth/login')}`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(values)
  });
  localStorage.setItem("access_token", response);
};

</script>

<template>
  <div class="auth-section">
    <div class="logo-section">
      <PayExtendIcon/>
    </div>
    <div class="auth-form p-20 h-lvh flex gap-10 flex-col justify-center align-items-center">
      <div class="flex gap-2 flex-col">
        <h1 class="text-3xl text-white">PayXtend Integration</h1>
        <p class="text-gray-400 mt-3">Login to your PayXtend account to continue.</p>
      </div>
      <div class="auth-form-content flex align-content-center">
        <Form v-slot="$form" :initialValues @submit="onFormSubmit" class="flex flex-col gap-4 w-5/6">
          <div class="flex flex-col gap-1 h-auto">
            <InputText name="email" type="email" placeholder="Email" fluid class="p-2 w-auto" />
            <Message v-if="$form.username?.invalid" severity="error" size="small" variant="simple">{{ $form.email.error?.message }}</Message>
          </div>
          <div class="flex flex-col gap-1 h-auto">
            <InputText name="password" type="password" placeholder="Password" fluid class="p-2 w-auto" />
            <Message v-if="$form.username?.invalid" severity="error" size="small" variant="simple">{{ $form.password.error?.message }}</Message>
          </div>
          <Button type="submit" severity="secondary" label="Submit" rounded-sm />
        </Form>
      </div>
      <div class="integration p-2">
        <div>
          <h1 class="text-white text-1xl font-extrabold mb-5">Integrations</h1>
        </div>
        <div class="flex gap-10 flex-row mt-4">
          <div class="icons">
            <svg fill="white" width="70" height="70" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M8.25 10.435l-2.165 0.46-0.010 7.12c0 1.315 0.99 2.165 2.305 2.165 0.73 0 1.265-0.135 1.56-0.295v-1.69c-0.285 0.115-1.685 0.525-1.685-0.785v-3.16h1.685v-1.89h-1.685zM12.705 13.015l-0.135-0.655h-1.92v7.66h2.215v-5.155c0.525-0.69 1.41-0.555 1.695-0.465v-2.040c-0.3-0.105-1.335-0.3-1.855 0.655zM17.32 9.4l-2.23 0.475v1.81l2.23-0.475zM2.245 14.615c0-0.345 0.29-0.48 0.755-0.485 0.675 0 1.535 0.205 2.21 0.57v-2.090c-0.735-0.29-1.47-0.405-2.205-0.405-1.8 0-3 0.94-3 2.51 0 2.46 3.375 2.060 3.375 3.12 0 0.41-0.355 0.545-0.85 0.545-0.735 0-1.685-0.305-2.43-0.71v2c0.825 0.355 1.66 0.505 2.425 0.505 1.845 0 3.115-0.79 3.115-2.39 0-2.645-3.395-2.17-3.395-3.17zM32 16.28c0-2.275-1.1-4.070-3.21-4.070s-3.395 1.795-3.395 4.055c0 2.675 1.515 3.91 3.675 3.91 1.060 0 1.855-0.24 2.46-0.575v-1.67c-0.605 0.305-1.3 0.49-2.18 0.49-0.865 0-1.625-0.305-1.725-1.345h4.345c0.010-0.115 0.030-0.58 0.030-0.795zM27.605 15.44c0-1 0.615-1.42 1.17-1.42 0.545 0 1.125 0.42 1.125 1.42zM21.96 12.21c-0.87 0-1.43 0.41-1.74 0.695l-0.115-0.55h-1.955v10.24l2.22-0.47 0.005-2.51c0.32 0.235 0.795 0.56 1.57 0.56 1.59 0 3.040-1.16 3.040-3.98 0.005-2.58-1.465-3.985-3.025-3.985zM21.43 18.335c-0.52 0-0.83-0.19-1.045-0.42l-0.015-3.3c0.23-0.255 0.55-0.44 1.060-0.44 0.81 0 1.37 0.91 1.37 2.070 0.005 1.195-0.545 2.090-1.37 2.090zM15.095 20.020h2.23v-7.66h-2.23z"></path> </g></svg>
          </div>
          <div class="icons">
            <svg width="70" height="70" viewBox="0 0 1020 300" fill="white" xmlns="http://www.w3.org/2000/svg">
              <path d="M397.382 244.212V53.4181H473.428C483.421 53.4181 492.508 55.962 500.684 61.0499C508.861 65.956 515.311 72.77 520.036 81.492C524.942 90.214 527.395 99.9354 527.395 110.656C527.395 121.74 524.942 131.735 520.036 140.638C515.311 149.542 508.861 156.629 500.684 161.898C492.508 167.167 483.421 169.802 473.428 169.802H421.096V244.212H397.382ZM421.096 146.634H473.972C479.424 146.634 484.33 145.09 488.692 142.001C493.052 138.73 496.505 134.369 499.049 128.918C501.593 123.467 502.865 117.379 502.865 110.656C502.865 104.115 501.593 98.3 499.049 93.2122C496.505 88.1244 493.052 84.0359 488.692 80.9468C484.33 77.8578 479.424 76.3133 473.972 76.3133H421.096V146.634Z" fill="white"/>
              <path d="M615.217 246.937C601.226 246.937 588.688 243.757 577.604 237.397C566.701 230.856 558.071 222.043 551.711 210.959C545.351 199.693 542.171 186.883 542.171 172.528C542.171 158.173 545.351 145.453 551.711 134.369C558.071 123.284 566.701 114.563 577.604 108.203C588.688 101.843 601.226 98.6634 615.217 98.6634C629.209 98.6634 641.656 101.843 652.559 108.203C663.643 114.563 672.274 123.284 678.452 134.369C684.811 145.453 687.991 158.173 687.991 172.528C687.991 186.883 684.811 199.693 678.452 210.959C672.274 222.043 663.643 230.856 652.559 237.397C641.656 243.757 629.209 246.937 615.217 246.937ZM615.217 225.677C624.848 225.677 633.389 223.406 640.838 218.863C648.288 214.139 654.103 207.779 658.283 199.784C662.644 191.789 664.733 182.704 664.552 172.528C664.733 162.352 662.644 153.358 658.283 145.544C654.103 137.549 648.288 131.28 640.838 126.737C633.389 122.195 624.848 119.923 615.217 119.923C605.587 119.923 596.956 122.195 589.324 126.737C581.874 131.28 576.059 137.549 571.88 145.544C567.701 153.539 565.612 162.534 565.612 172.528C565.612 182.704 567.701 191.789 571.88 199.784C576.059 207.779 581.874 214.139 589.324 218.863C596.956 223.406 605.587 225.677 615.217 225.677Z" fill="white"/>
              <path d="M712.897 244.212V42.5156H735.792V244.212H712.897Z" fill="white"/>
              <path d="M826.119 246.937C813.945 246.937 802.86 243.757 792.866 237.397C783.054 230.856 775.241 221.952 769.426 210.686C763.612 199.421 760.704 186.701 760.704 172.528C760.704 158.173 763.702 145.453 769.698 134.369C775.695 123.284 783.69 114.563 793.684 108.203C803.86 101.843 815.217 98.6634 827.754 98.6634C835.204 98.6634 842.019 99.7537 848.196 101.934C854.556 104.115 860.189 107.204 865.096 111.201C870.001 115.017 874.09 119.56 877.361 124.829C880.631 129.917 882.811 135.368 883.902 141.184L877.906 138.457L878.178 101.662H901.073V244.212H878.178V209.597L883.902 206.598C882.63 211.867 880.177 216.955 876.542 221.862C873.09 226.768 868.729 231.128 863.46 234.944C858.372 238.579 852.648 241.486 846.288 243.666C839.928 245.846 833.206 246.937 826.119 246.937ZM831.57 225.404C840.838 225.404 849.014 223.134 856.1 218.591C863.188 214.048 868.821 207.87 873 200.057C877.179 192.061 879.269 182.885 879.269 172.528C879.269 162.352 877.179 153.358 873 145.544C869.002 137.731 863.369 131.552 856.1 127.01C849.014 122.467 840.838 120.196 831.57 120.196C822.303 120.196 814.126 122.467 807.04 127.01C799.953 131.552 794.32 137.731 790.14 145.544C786.143 153.358 784.145 162.352 784.145 172.528C784.145 182.704 786.143 191.789 790.14 199.784C794.32 207.779 799.953 214.048 807.04 218.591C814.126 223.134 822.303 225.404 831.57 225.404Z" fill="white"/>
              <path d="M930.49 244.212V101.662H953.386L953.931 141.728L951.478 134.914C953.476 128.191 956.747 122.104 961.29 116.652C965.832 111.201 971.193 106.84 977.371 103.569C983.73 100.299 990.454 98.6634 997.54 98.6634C1000.63 98.6634 1003.54 98.936 1006.26 99.4811C1009.17 99.8446 1011.53 100.39 1013.35 101.116L1007.08 126.464C1004.72 125.375 1002.27 124.556 999.721 124.012C997.177 123.467 994.814 123.194 992.634 123.194C986.82 123.194 981.46 124.284 976.553 126.464C971.829 128.645 967.74 131.644 964.288 135.46C961.017 139.093 958.383 143.364 956.383 148.27C954.567 153.176 953.658 158.446 953.658 164.078V244.212H930.49Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M64.8636 269.177C130.906 313.882 220.684 296.585 265.388 230.543C310.094 164.501 292.798 74.723 226.756 30.0179C160.714 -14.6872 70.935 2.60972 26.2299 68.6516C-18.4753 134.693 -1.17834 224.472 64.8636 269.177ZM84.0172 270.357C144.43 301.264 221.064 272.251 255.187 205.557C289.309 138.861 267.997 59.7378 207.584 28.8301C147.173 -2.0774 70.5375 26.9345 36.4152 93.63C2.29299 160.325 23.6051 239.448 84.0172 270.357Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M101.233 286.13C155.766 303.879 219.918 256.991 244.522 181.401C269.124 105.812 244.86 30.146 190.327 12.3967C135.794 -5.35246 71.6428 41.5362 47.04 117.126C22.4374 192.715 46.7007 268.381 101.233 286.13ZM117.915 280.385C164.066 290.229 213.97 239.649 229.378 167.414C244.784 95.1779 219.862 28.6392 173.71 18.7955C127.559 8.95174 77.6556 59.5307 62.2482 131.767C46.841 204.002 71.7639 270.541 117.915 280.385Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M130.567 292.297C167.056 296.192 203.471 235.332 211.903 156.36C220.336 77.3886 197.592 10.2109 161.104 6.3148C124.616 2.41866 88.2006 63.2795 79.7681 142.251C71.3357 221.222 94.0792 288.401 130.567 292.297ZM147.642 268.26C174.048 267.843 194.616 214.386 193.58 148.861C192.546 83.3351 170.299 30.5544 143.893 30.9716C117.486 31.3889 96.9186 84.8459 97.9538 150.372C98.9891 215.897 121.235 268.677 147.642 268.26Z" fill="white"/>
            </svg>

          </div>
          <div class="icons">
            <svg width="80" height="70" viewBox="0 -181.5 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M0.06,27.679 L17.912,27.679 L17.912,67.341 L55.563,67.341 L55.563,27.679 L73.438,27.679 L73.438,125.037 L55.563,125.037 L55.563,84.542 L17.912,84.542 L17.912,125.037 L0.06,125.037 L0.06,27.679 L0.06,27.679 Z" fill="white"> </path> <path d="M129.993,93.326 C129.993,101.476 123.353,108.108 115.205,108.108 C107.054,108.108 100.418,101.476 100.418,93.326 L100.418,51.41 L83.488,51.41 L83.488,93.326 C83.488,110.813 97.717,125.037 115.205,125.037 C132.689,125.037 146.917,110.813 146.917,93.326 L146.917,51.41 L129.993,51.41 L129.993,93.326" fill="white"> </path> <path d="M194.179,51.901 C185.781,51.901 179.919,54.338 174.258,59.895 L174.258,27.679 L157.273,27.679 L157.273,87.384 C157.273,109.732 173.431,125.037 191.584,125.037 C211.765,125.037 229.447,109.459 229.447,88.47 C229.447,67.747 213.142,51.901 194.179,51.901 L194.179,51.901 Z M194.601,109.324 C183.092,109.324 174.291,99.712 174.291,88.47 C174.291,77.226 183.092,67.611 194.601,67.611 C204.353,67.611 213.159,77.226 213.159,88.47 C213.159,99.712 204.353,109.324 194.601,109.324 L194.601,109.324 Z" fill="white"> </path> <path d="M257.974,56.18 C257.974,47.642 263.663,44.935 269.891,44.935 C274.905,44.935 281.54,48.727 285.87,53.333 L296.973,40.332 C291.424,32.884 280.185,27.736 270.975,27.736 C252.554,27.736 239.281,38.436 239.281,56.18 C239.281,89.09 279.778,78.658 279.778,97.082 C279.778,102.764 274.227,107.78 267.865,107.78 C257.839,107.78 254.587,102.904 249.984,97.756 L237.657,110.485 C245.517,120.102 255.265,124.98 266.914,124.98 C284.384,124.98 298.47,114.145 298.47,97.213 C298.47,60.647 257.974,72.025 257.974,56.18" fill="white"> </path> <path d="M343.184,50.947 C325.033,50.947 308.873,66.243 308.873,88.596 L308.873,148.455 L325.857,148.455 L325.857,116.086 C331.519,121.639 337.378,124.08 345.779,124.08 C364.741,124.08 381.048,108.236 381.048,87.513 C381.048,66.521 363.361,50.947 343.184,50.947 L343.184,50.947 Z M346.202,108.372 C334.694,108.372 325.892,98.747 325.892,87.513 C325.892,76.269 334.694,66.654 346.202,66.654 C355.952,66.654 364.759,76.269 364.759,87.513 C364.759,98.747 355.952,108.372 346.202,108.372 L346.202,108.372 Z" fill="white"> </path> <path d="M506.069,109.324 C496.051,109.324 493.207,104.992 493.207,98.353 L493.207,68.965 L508.779,68.965 L508.779,54.069 L493.207,54.069 L493.207,34.429 L476.012,42.147 L476.012,102.01 C476.012,117.316 486.572,125.037 501.057,125.037 C503.224,125.037 506.207,124.897 507.834,124.496 L512.033,109.058 C510.137,109.189 507.971,109.324 506.069,109.324" fill="white"> </path> <path d="M461.278,69.831 C458.022,64.229 453.442,59.738 447.716,56.357 C443.437,53.866 439,52.285 434,51.606 L434,33.806 C439,31.683 442.103,26.984 442.103,21.502 C442.103,14.03 436.111,7.975 428.645,7.975 C421.173,7.975 415.076,14.03 415.076,21.502 C415.076,26.984 418,31.683 423,33.806 L423,51.614 C419,52.192 414.852,53.439 411.064,55.355 C403.327,49.479 377.957,30.202 363.116,18.943 C363.468,17.674 363.739,16.366 363.739,14.986 C363.739,6.71 357.037,0.002 348.758,0.002 C340.479,0.002 333.78,6.71 333.78,14.986 C333.78,23.261 340.486,29.971 348.765,29.971 C351.589,29.971 354.201,29.145 356.455,27.787 L359.587,30.163 L402.623,61.171 C400.348,63.26 398.229,65.636 396.534,68.302 C393.099,73.737 391,79.717 391,86.24 L391,87.601 C391,92.18 391.87,96.503 393.352,100.564 C394.657,104.11 396.565,107.334 398.928,110.249 L384.645,124.567 C383.378,124.1 382.047,123.844 380.658,123.844 C377.566,123.844 374.666,125.052 372.479,127.235 C370.29,129.424 369.091,132.331 369.091,135.425 C369.092,138.518 370.297,141.425 372.485,143.612 C374.672,145.8 377.579,147.006 380.673,147.006 C383.767,147.006 386.675,145.8 388.864,143.612 C391.048,141.425 392.254,138.517 392.254,135.425 C392.254,134.228 392.069,133.06 391.721,131.95 L406.484,117.185 C408.508,118.583 410.694,119.76 413.044,120.775 C417.679,122.779 422.795,124 428.394,124 L429.42,124 C435.61,124 441.449,122.546 446.938,119.572 C452.722,116.429 457.249,112.131 460.669,106.644 C464.107,101.142 466,95.063 466,88.375 L466,88.041 C466,81.462 464.477,75.392 461.278,69.831 L461.278,69.831 Z M443.24,100.804 C439.233,105.257 434.627,108 429.42,108 L428.562,108 C425.588,108 422.679,107.178 419.831,105.683 C416.621,104.037 414.181,101.689 412.184,98.716 C410.12,95.798 409,92.612 409,89.234 L409,88.208 C409,84.887 409.637,81.738 411.243,78.764 C412.96,75.513 415.279,72.985 418.363,70.975 C421.391,68.979 424.625,68 428.227,68 L428.562,68 C431.828,68 434.92,68.644 437.838,70.137 C440.811,71.729 443.24,73.904 445.123,76.765 C446.952,79.627 448.04,82.714 448.39,86.077 C448.445,86.776 448.473,87.492 448.473,88.176 C448.473,92.74 446.729,96.967 443.24,100.804 L443.24,100.804 Z" fill="#F8761F"> </path> </g> </g></svg>
          </div>

        </div>

      </div>
    </div>

  </div>


</template>

<style scoped>
:root{
  margin: 0;
  padding: 0;
}
.auth-section{
  position: relative;
  display: flex;
  flex-direction: row

}
.auth-form-content{
  .p-inputtext,.p-button{
    width:50%;
  }
}

.auth-form{
  background: black;
  width: 60%;
  margin-left: 40%;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}
.logo-section{
  padding: 2%;

}

</style>